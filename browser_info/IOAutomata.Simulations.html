<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory IOAutomata.Simulations</title>
</head>


<body>
<div class="head">
<h1>Theory IOAutomata.Simulations</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Definition and Soundness of Refinement Mappings,
  Forward Simulations, and Backward Simulations›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="IOAutomata.Simulations.html"><span>Simulations</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="IOAutomata.IOA.html"><span>IOA</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_147..154">context</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA|locale"><span>IOA</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Simulations.IOA.trace_match|const"><span>trace_match</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.trace_match_def|fact"><span class="entity_def" id="Simulations.IOA.trace_match_def|thm"><span class="entity_def" id="Simulations.IOA.trace_match_def_raw|axiom"><span class="entity_def" id="offset_195..210">trace_match_def</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>trace_match</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="keyword1"><span>in</span></span><span>
                    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Simulations.IOA.refines_def|fact"><span class="entity_def" id="Simulations.IOA.refines_def|thm"><span class="entity_def" id="Simulations.IOA.refines_def_raw|axiom"><span class="entity_def" id="offset_336..346">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Simulations.IOA.refines|const"><span>refines</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>refines</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_frag_of|const"><span>is_exec_frag_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.trace_match|const"><span>trace_match</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>e</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Simulations.IOA.is_ref_map_def|fact"><span class="entity_def" id="Simulations.IOA.is_ref_map_def|thm"><span class="entity_def" id="Simulations.IOA.is_ref_map_def_raw|axiom"><span class="entity_def" id="offset_475..485">definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Simulations.IOA.is_ref_map|const"><span>is_ref_map</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s1</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s1</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s2</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_ref_map</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.reachable|const"><span>reachable</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>t</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.refines|const"><span>refines</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Simulations.IOA.is_forward_sim_def|fact"><span class="entity_def" id="Simulations.IOA.is_forward_sim_def|thm"><span class="entity_def" id="Simulations.IOA.is_forward_sim_def_raw|axiom"><span class="entity_def" id="offset_693..703">definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Simulations.IOA.is_forward_sim|const"><span>is_forward_sim</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s1</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s2</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s1</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s2</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_forward_sim</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
   </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>
   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.reachable|const"><span>reachable</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_frag_of|const"><span>is_exec_frag_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="bound"><span>e</span></span><span>
              </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.trace_match|const"><span>trace_match</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Simulations.IOA.is_backward_sim_def|fact"><span class="entity_def" id="Simulations.IOA.is_backward_sim_def|thm"><span class="entity_def" id="Simulations.IOA.is_backward_sim_def_raw|axiom"><span class="entity_def" id="offset_1015..1025">definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Simulations.IOA.is_backward_sim|const"><span>is_backward_sim</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'s1</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s2</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s1</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'s2</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_backward_sim</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
   </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>― ‹ Restricting this to reachable states would suffice ›</span></span><span>
   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span>
   </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>t'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.reachable|const"><span>reachable</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="bound"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_frag_of|const"><span>is_exec_frag_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="bound"><span>e</span></span><span>
                </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.trace_match|const"><span>trace_match</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>e</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"A series of lemmas that will be useful in the soundness proofs"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1515..1520">lemma</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.step_eq_traces|fact"><span class="entity_def" id="Simulations.IOA.step_eq_traces|thm"><span class="entity_def" id="offset_1521..1535">step_eq_traces</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>e_B'</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="free"><span>e_A'</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>t</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>e_A</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.append_exec|const"><span>append_exec</span></a><span> </span><span class="free"><span>e_A'</span></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>e_B</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.cons_exec|const"><span>cons_exec</span></a><span> </span><span class="free"><span>e_B'</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span class="free"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>tr</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_1677..1678">1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_1737..1738">2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>a</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1854..1855">3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
         </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B'</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1515..1520"><span>e_B_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>traces_simps</span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>cons_exec_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2043..2044">4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> 
         </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_A'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_A'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1737..1738"><span>2</span></a><span> </span><span>trace_append_is_append_trace</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>e_A'</span></span></span><span> </span><span class="quoted"><span class="free"><span>e</span></span></span><span class="main"><span>]</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1515..1520"><span>e_A_def</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1515..1520"><span>tr_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1677..1678"><span>1</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1854..1855"><span>3</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2043..2044"><span>4</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2332..2337">lemma</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.exec_inc_imp_trace_inc|fact"><span class="entity_def" id="Simulations.IOA.exec_inc_imp_trace_inc|thm"><span class="entity_def" id="offset_2338..2360">exec_inc_imp_trace_inc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>e_B</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>e_B</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>t</span></span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_2567..2573">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2567..2573"><span>this</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>e</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_2618..2619">1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_2651..2652">2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>traces_alt</span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2332..2337"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2618..2619"><span>1</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2332..2337"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2740..2741">3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>trace_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2651..2652"><span>2</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2740..2741"><span>3</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2332..2337"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>e'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>e'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2740..2741"><span>3</span></a><span> </span><span>traces_alt</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Soundness of Refinement Mappings"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3058..3063">lemma</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.ref_map_execs|fact"><span class="entity_def" id="Simulations.IOA.ref_map_execs|thm"><span class="entity_def" id="offset_3064..3077">ref_map_execs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sA</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sB</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'sB</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'sA</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>e_B</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.is_ref_map|const"><span>is_ref_map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>  </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>e_A</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_3058..3063"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>  </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>e_A</span></span><span> 
                  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B</span></span><span> 
                  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="free"><span>e_B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span class="quoted"><span class="free"><span>e_B</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_3534..3537">Nil</span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_3058..3063"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_475..485"><span>is_ref_map_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="var"><span>?e_A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_3534..3537"><span>Nil.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_B</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_3534..3537"><span>Nil.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>traces_simps</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_3534..3537"><span>Nil.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>last_state.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.collapse|fact"><span>prod.collapse</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_4041..4045">Cons</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_B'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?t</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?a</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4163..4164">1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_4190..4191">2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?s</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="var"><span>?a</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="free"><span>B</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>⟶</span></a></span><span class="var"><span>?t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4041..4045"><span>Cons.prems</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4041..4045"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
            </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_frag_of.cases</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
            </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_frag_of.cases</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4041..4045"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>e_A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_4468..4471">ih1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>e_A'</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_4502..4505">ih2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_4569..4572">ih3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4163..4164"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4627..4628">3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.reachable|const"><span>reachable</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="var"><span>?s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>last_state_reachable</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>e</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_4700..4701">4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_4721..4722">5</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?t</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_4754..4755">6</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_frag_of|const"><span>is_exec_frag_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_4786..4787">7</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="var"><span>?a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> 
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="var"><span>?a</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4190..4191"><span>2</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4627..4628"><span>3</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_3058..3063"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> 
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_475..485"><span>is_ref_map_def</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_336..346"><span>refines_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.append_exec|const"><span>append_exec</span></a><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="var"><span>?e_A</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4468..4471"><span>ih1</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4569..4572"><span>ih3</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4700..4701"><span>4</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4754..4755"><span>6</span></a><span> </span><span>append_exec_frags_is_exec_frag</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e_A'</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>append_exec_def</span></a><span> </span><span>append_exec_frags_is_exec_frag</span><span> 
          </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_B</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4502..4505"><span>ih2</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4041..4045"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4786..4787"><span>7</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1521..1535"><span>step_eq_traces</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e_A'</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_B'</span></span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?a</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>cons_exec_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.collapse|fact"><span>prod.collapse</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?t</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4569..4572"><span>ih3</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4700..4701"><span>4</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4721..4722"><span>5</span></a><span> </span><span>last_state_of_append</span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_4041..4045"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>last_state.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.surjective_pairing|fact"><span>surjective_pairing</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5638..5645">theorem</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.ref_map_soundness|fact"><span class="entity_def" id="Simulations.IOA.ref_map_soundness|thm"><span>ref_map_soundness</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sA</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sB</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'sB</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'sA</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.is_ref_map|const"><span>is_ref_map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_5638..5645"><span>assms</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_3064..3077"><span>ref_map_execs</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2338..2360"><span>exec_inc_imp_trace_inc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Soundness of Forward Simulations"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5925..5930">lemma</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.forward_sim_execs|fact"><span class="entity_def" id="Simulations.IOA.forward_sim_execs|thm"><span class="entity_def" id="offset_5931..5948">forward_sim_execs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sA</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sB</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'sB</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'sA</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>e_B</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.is_forward_sim|const"><span>is_forward_sim</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>  </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>e_A</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_5925..5930"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>  </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>e_A</span></span><span> 
                  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B</span></span><span> 
                  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="free"><span>e_B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span class="quoted"><span class="free"><span>e_B</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_6413..6416">Nil</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_5925..5930"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6489..6491">by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_693..703"><span>is_forward_sim_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_6489..6491"><span>this</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>s'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_6552..6553">1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_6577..6578">2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_iff|fact"><span>Int_iff</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_6413..6416"><span>Nil.prems</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.all_not_in_conv|fact"><span>all_not_in_conv</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="var"><span>?e_A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_6577..6578"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_B</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_6413..6416"><span>Nil.hyps</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>trace_def</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>schedule_def</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>filter_act_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_6413..6416"><span>Nil.hyps</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_6552..6553"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>last_state.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.surjective_pairing|fact"><span>surjective_pairing</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_7087..7091">Cons</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_B'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?t</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?a</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7209..7210">1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7236..7237">2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?s</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="var"><span>?a</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="free"><span>B</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>⟶</span></a></span><span class="var"><span>?t</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7087..7091"><span>Cons.prems</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7087..7091"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
            </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_frag_of.cases</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
            </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_frag_of.cases</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7087..7091"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>e_A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_7514..7517">ih1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>e_A'</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7548..7551">ih2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7615..7618">ih3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7209..7210"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7673..7674">3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.reachable|const"><span>reachable</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="var"><span>?s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>last_state_reachable</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>e</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_7746..7747">4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_A'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7778..7779">5</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?t</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7811..7812">6</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_frag_of|const"><span>is_exec_frag_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7843..7844">7</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="var"><span>?a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="var"><span>?a</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7236..7237"><span>2</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7673..7674"><span>3</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_5925..5930"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7615..7618"><span>ih3</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_693..703"><span>is_forward_sim_def</span></a><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.collapse|fact"><span>prod.collapse</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.inject|fact"><span>prod.inject</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.append_exec|const"><span>append_exec</span></a><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="var"><span>?e_A</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7514..7517"><span>ih1</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7615..7618"><span>ih3</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7746..7747"><span>4</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7811..7812"><span>6</span></a><span> </span><span>append_exec_frags_is_exec_frag</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e_A'</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>append_exec_def</span></a><span> </span><span>append_exec_frags_is_exec_frag</span><span> 
            </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_B</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7548..7551"><span>ih2</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7087..7091"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7843..7844"><span>7</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1521..1535"><span>step_eq_traces</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e_A'</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_B'</span></span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?a</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>cons_exec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.collapse|fact"><span>prod.collapse</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?t</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7615..7618"><span>ih3</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7746..7747"><span>4</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7778..7779"><span>5</span></a><span> </span><span>last_state_of_append</span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_7087..7091"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>last_state.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.surjective_pairing|fact"><span>surjective_pairing</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8710..8717">theorem</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.forward_sim_soundness|fact"><span class="entity_def" id="Simulations.IOA.forward_sim_soundness|thm"><span>forward_sim_soundness</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sA</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sB</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'sB</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'sA</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.is_forward_sim|const"><span>is_forward_sim</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_8710..8717"><span>assms</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_5931..5948"><span>forward_sim_execs</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2338..2360"><span>exec_inc_imp_trace_inc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"Soundness of Backward Simulations"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9014..9019">lemma</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.backward_sim_execs|fact"><span class="entity_def" id="Simulations.IOA.backward_sim_execs|thm"><span class="entity_def" id="offset_9020..9038">backward_sim_execs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sA</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sB</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'sB</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'sA</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>e_B</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.is_backward_sim|const"><span>is_backward_sim</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>  </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>e_A</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9014..9019"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="free"><span>e_B</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>
          </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>e_A</span></span><span> 
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>e_B</span></span><span> 
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>e_B</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span class="quoted"><span class="free"><span>e_B</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_9506..9509">Nil</span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>s'</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_9530..9531">1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9568..9569">2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span>A</span></span><span> "</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9014..9019"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1015..1025"><span>is_backward_sim_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9506..9509"><span>Nil</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9530..9531"><span>1</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9568..9569"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9689..9690">3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.start|const"><span>start</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>last_state.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_mp|fact"><span>set_mp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.surjective_pairing|fact"><span>surjective_pairing</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>s'</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9839..9840">4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="var"><span>?e_A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9689..9690"><span>3</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9909..9910">5</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_B</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9506..9509"><span>Nil.hyps</span></a><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>trace_def</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>schedule_def</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>filter_act_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10049..10050">6</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9506..9509"><span>Nil.hyps</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9530..9531"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>last_state.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9839..9840"><span>4</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9909..9910"><span>5</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10049..10050"><span>6</span></a><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_10212..10216">Cons</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>ps</span></span><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>t'</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_10247..10248">8</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>t'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_B'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?t</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?a</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10388..10389">5</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?t</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_B</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10212..10216"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>last_state.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.collapse|fact"><span>prod.collapse</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10496..10497">1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_10523..10524">2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?s</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="var"><span>?a</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>─</span></a></span><span class="free"><span>B</span></span><span class="main"><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_trans|const"><span>⟶</span></a></span><span class="var"><span>?t</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10212..10216"><span>Cons.prems</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10212..10216"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
              </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_frag_of.cases</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
              </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e_B</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span class="skolem"><span>ps</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_frag_of.cases</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10496..10497"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10789..10790">3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.reachable|const"><span>reachable</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="var"><span>?s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>last_state_reachable</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>e</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_10864..10865">4</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_10885..10886">5</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>t'</span></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_10918..10919">6</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_frag_of|const"><span>is_exec_frag_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_10952..10953">7</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e</span></span><span> </span><span class="keyword1"><span>in</span></span><span> 
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="var"><span>?a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="var"><span>?a</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>tr</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10523..10524"><span>2</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9014..9019"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10247..10248"><span>8</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10388..10389"><span>5</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10789..10790"><span>3</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1015..1025"><span>is_backward_sim_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>e_A'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_11143..11146">ih1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>e_A'</span></span><span>"</span></span></span><span> 
        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11180..11183">ih2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_B'</span></span><span>"</span></span></span><span> 
        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_11250..11253">ih3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10496..10497"><span>1</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10864..10865"><span>4</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10212..10216"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.snd_conv|fact"><span>snd_conv</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_A</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.append_exec|const"><span>append_exec</span></a><span> </span><span class="skolem"><span>e_A'</span></span><span> </span><span class="skolem"><span>e</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="var"><span>?e_A</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_11143..11146"><span>ih1</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_11250..11253"><span>ih3</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10864..10865"><span>4</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10918..10919"><span>6</span></a><span> </span><span>append_exec_frags_is_exec_frag</span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e_A'</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>append_exec_def</span></a><span> </span><span>append_exec_frags_is_exec_frag</span><span> 
            </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>is_exec_of_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_B</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_11180..11183"><span>ih2</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10212..10216"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10952..10953"><span>7</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1521..1535"><span>step_eq_traces</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e_A'</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?e_B'</span></span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?a</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>e</span></span></span><span class="main"><span>]</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_147..154"><span>cons_exec_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.collapse|fact"><span>prod.collapse</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="var"><span>?e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>t'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_11250..11253"><span>ih3</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_10885..10886"><span>5</span></a><span> </span><span>last_state_of_append</span><span> 
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.is_exec_of|const"><span>is_exec_of</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>e_A</span></span><span> 
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.trace|const"><span>trace</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa.asig|const"><span>ioa.asig</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>e_B</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.last_state|const"><span>last_state</span></a><span> </span><span class="bound"><span>e_A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>t'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9014..9019"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>total</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_1015..1025"><span>is_backward_sim_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12200..12207">theorem</span></span></span><span> </span><span class="entity_def" id="Simulations.IOA.backward_sim_soundness|fact"><span class="entity_def" id="Simulations.IOA.backward_sim_soundness|thm"><span>backward_sim_soundness</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sA</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'sB</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.ioa|type"><span>ioa</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'sB</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'sA</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.Simulations.html#Simulations.IOA.is_backward_sim|const"><span>is_backward_sim</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.ext|const"><span>ext</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="IOAutomata.IOA.html#IOA.IOA.traces|const"><span>traces</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_12200..12207"><span>assms</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_9020..9038"><span>backward_sim_execs</span></a><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_2338..2360"><span>exec_inc_imp_trace_inc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="IOAutomata.Simulations.html#offset_195..210"><span>trace_match_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>